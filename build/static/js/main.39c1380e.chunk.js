(this["webpackJsonpprojeto-pedidos"]=this["webpackJsonpprojeto-pedidos"]||[]).push([[0],{212:function(e,t,a){},214:function(e,t,a){},215:function(e,t,a){},216:function(e,t,a){},217:function(e,t,a){},218:function(e,t,a){},219:function(e,t,a){},220:function(e,t,a){"use strict";a.r(t);var s=a(0),i=a.n(s),o=a(34),n=a.n(o),d=a(19),c=a(3),r=(a(93),a(5)),l=a(17),j=a(16),m=a.n(j),b=a(2),u=(a(81),a(212),a(1)),p=function(){var e=Object(c.g)(),t=l.b().shape({email:l.c().email("Este n\xe3o \xe9 um formato v\xe1lido de email").required("O campo email \xe9 de preenchimento obrigat\xf3rio"),senha:l.c().min(8,"M\xednimo de 8 caracteres para o campo senha").required("O campo senha \xe9 de preenchimento obrigat\xf3rio")});return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"Login",children:[Object(u.jsx)("h2",{children:"Autentica\xe7\xe3o"}),Object(u.jsx)("p",{children:"Informe seu email e senha para autentica\xe7\xe3o"}),Object(u.jsx)(r.d,{onSubmit:function(t){b.b.loading("Aguarde... Validando dados do usu\xe1rio");var a={method:"post",url:"https://projeto-pedidos-api.jelastic.saveincloud.net/usuarios/autenticaUsuario",headers:{"Content-Type":"application/json"},data:JSON.stringify({email:t.email,senha:t.senha})};m()(a).then((function(t){localStorage.setItem("app-token",t.data.resposta.token),localStorage.setItem("app-email",t.data.resposta.email),localStorage.setItem("app-senha",t.data.resposta.senha),b.b.dismiss(),b.b.success("Usu\xe1rio autenticado com sucesso",{autoClose:!1}),e("/pedidos")})).catch((function(e){b.b.dismiss(),b.b.warning("Usu\xe1rio n\xe3o encontrado para os dados informados",{autoClose:!1})}))},validationSchema:t,initialValues:{email:"",senha:""},children:Object(u.jsxs)(r.c,{className:"Login",children:[Object(u.jsxs)("div",{className:"Login-Group",children:[Object(u.jsx)(r.b,{name:"email",className:"Login-Field"}),Object(u.jsx)(r.a,{component:"span",name:"email",className:"Login-Error"})]}),Object(u.jsxs)("div",{className:"Login-Group",children:[Object(u.jsx)(r.b,{type:"password",name:"senha",className:"Login-Field"}),Object(u.jsx)(r.a,{component:"span",name:"senha",className:"Login-Error"})]}),Object(u.jsx)("button",{className:"Login-Btn",type:"submit",children:"Validar meus dados"})]})}),Object(u.jsx)(b.a,{position:"top-center",draggable:"true"})]})})},h=a(6),O=(a(214),a(9)),x=a(38),g=(a(82),function(e){var t=e.itensPedido,a=e.handleItemDeletion;return Object(u.jsx)(u.Fragment,{children:t.map((function(e){return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"Itens-container",children:[Object(u.jsxs)("div",{className:"Itens-title",children:["( ",("000000"+e.quantidade).slice(-6)," Und ) - ",e.nome]}),Object(u.jsxs)("div",{className:"buttons-container",children:[1===e.rentabilidade?Object(u.jsx)(x.a,{className:"Badge",bg:"success",children:"Rentabilidade \xf3tima"}):2===e.rentabilidade?Object(u.jsx)(x.a,{className:"Badge",bg:"warning",children:"Rentabilidade boa"}):Object(u.jsx)(x.a,{className:"Badge",bg:"danger",children:"Rentabilidade ruim"}),Object(u.jsx)("button",{className:"Item-button",onClick:function(){return a(e.id)},children:Object(u.jsx)(O.e,{})})]})]},e.id)})}))})}),v=(a(215),function(e){var t=e.listaPedidos;return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"Pedidos-intens",children:[Object(u.jsx)("div",{className:"Pedidos-head",children:Object(u.jsx)("h4",{children:"Lista de pedidos"})}),Object(u.jsx)("div",{className:"Lista-pedidos",children:t.map((function(e){return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"Itens-container",children:[Object(u.jsxs)("div",{className:"Itens-title",children:[e.documento," - ",e.nome]}),Object(u.jsxs)("div",{className:"buttons-container",children:[("0000000000"+e.numeroPedidoCliente).slice(-10)," ( ",e.quantidade," Und )"]})]},e.id)})}))})]})})}),N=(a(216),a(217),function(e){var t=e.handleSubmitPedido,a=e.orderIsOpen,s=l.b().shape({numeroPedidoCliente:l.a("Somente n\xfameros").required("O campo de numero do pedido do cliente \xe9 de preenchimento obrigat\xf3rio"),idCliente:l.c().required("O campo cliente \xe9 de preenchimento obrigat\xf3rio")});return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(r.d,{onSubmit:t,validationSchema:s,initialValues:{idCliente:"",numeroPedidoCliente:""},setValuesOrders:!0,children:Object(u.jsxs)(r.c,{className:"Pedido-Form",children:[Object(u.jsxs)("div",{className:"Pedidos-linhas",children:[Object(u.jsxs)("div",{className:"Flex1",children:[Object(u.jsx)("label",{children:"* N\xba Pedido cliente"}),Object(u.jsx)(r.b,{name:"numeroPedidoCliente",className:"Pedido-Field"}),Object(u.jsx)(r.a,{component:"span",name:"numeroPedidoCliente",className:"Login-Error"})]}),Object(u.jsxs)("div",{className:"Flex4",children:[Object(u.jsx)("label",{children:"* Selecione um cliente"}),Object(u.jsxs)(r.b,{className:"Pedido-Field Select",component:"select",name:"idCliente",children:[Object(u.jsx)("option",{className:"options",value:"0"}),Object(u.jsx)("option",{className:"options",value:"1",children:"Darth\u200b \u200bVader"}),Object(u.jsx)("option",{className:"options",value:"2",children:"Obi-Wan\u200b \u200bKenobi"}),Object(u.jsx)("option",{className:"options",value:"3",children:"Luke\u200b \u200bSkywalker"}),Object(u.jsx)("option",{className:"options",value:"4",children:"Imperador\u200b \u200bPalpatine"}),Object(u.jsx)("option",{className:"options",value:"5",children:"Han\u200b \u200bSolo"})]})]})]}),!1===a?Object(u.jsx)("div",{className:"Pedidos-opcoes",children:Object(u.jsxs)("button",{className:"Pedido-Btn",type:"submit",children:[Object(u.jsx)(O.a,{})," Adicionar itens"]})}):""]})})})}),f=function(e){var t=e.handleAddItem;return Object(u.jsx)(r.d,{onSubmit:t,initialValues:{idProduto:1,quantidade:0,precoUnitario:0},children:Object(u.jsxs)(r.c,{className:"Pedido-Form",children:[Object(u.jsx)("div",{className:"Pedidos-linhas",children:Object(u.jsx)("div",{className:"Flex1",children:Object(u.jsx)("hr",{})})}),Object(u.jsx)("div",{className:"Pedidos-linhas",children:Object(u.jsxs)("div",{className:"Flex1",children:[Object(u.jsx)("label",{children:"* Selecione um produto"}),Object(u.jsxs)(r.b,{className:"Pedido-Field Select",component:"select",name:"idProduto",children:[Object(u.jsx)("option",{className:"options",value:"0"}),Object(u.jsx)("option",{className:"options",value:"1",children:"Millenium\u200b \u200bFalcon"}),Object(u.jsx)("option",{className:"options",value:"2",children:"X-Wing"}),Object(u.jsx)("option",{className:"options",value:"3",children:"Super Star Destroyer"}),Object(u.jsx)("option",{className:"options",value:"4",children:"TIE Fighter"}),Object(u.jsx)("option",{className:"options",value:"5",children:"Lightsaber"}),Object(u.jsx)("option",{className:"options",value:"6",children:"DLT-19 Heavy Blaster Rifle"}),Object(u.jsx)("option",{className:"options",value:"7",children:"Lightsaber"})]})]})}),Object(u.jsxs)("div",{className:"Pedidos-linhas",children:[Object(u.jsxs)("div",{className:"Flex2 NoLeft",children:[Object(u.jsx)("label",{children:"* Quantidade"}),Object(u.jsx)(r.b,{name:"quantidade",className:"Pedido-Field"})]}),Object(u.jsxs)("div",{className:"Flex2",children:[Object(u.jsx)("label",{children:"* Pre\xe7o"}),Object(u.jsx)(r.b,{name:"precoUnitario",className:"Pedido-Field"})]}),Object(u.jsx)("div",{className:"Flex4 Pedidos-opcoes",children:Object(u.jsxs)("button",{className:"button Botao-adicionar-item",type:"submit",children:[Object(u.jsx)(O.b,{})," Adicionar item"]})})]})]})})},P=function(e){var t=e.handleNewOrder;return Object(u.jsx)("div",{className:"Pedidos-opcoes-pedido",children:Object(u.jsxs)("button",{className:"button",onClick:t,type:"button",children:[Object(u.jsx)(O.d,{})," Iniciar novo Pedido"]})})},S=function(e){var t=e.handleFinishOrder;return Object(u.jsx)("div",{className:"Flex4 Pedidos-opcoes",children:Object(u.jsxs)("button",{className:"Pedido-Btn",onClick:t,type:"button",children:[Object(u.jsx)(O.c,{})," Finalizar Pedido"]})})},C=function(e){var t=e.handleLogOut;return Object(u.jsxs)("div",{className:"Pedidos-cabecalho",children:[Object(u.jsx)("div",{className:"Pedidos-titulo",children:Object(u.jsx)("h2",{children:"Pedidos"})}),Object(u.jsx)("div",{className:"Pedidos-opcoes",children:Object(u.jsxs)("button",{className:"button",onClick:t,children:[Object(u.jsx)(O.f,{})," Sair"]})})]})},F=function(){var e=Object(c.g)(),t=!!localStorage.getItem("app-token"),a=Object(s.useState)(!1),i=Object(h.a)(a,2),o=i[0],n=i[1],d=Object(s.useState)(!1),r=Object(h.a)(d,2),l=r[0],j=r[1],p=Object(s.useState)([]),O=Object(h.a)(p,2),x=O[0],F=O[1],I=Object(s.useState)([]),y=Object(h.a)(I,2),L=y[0],k=y[1],A=function(){b.b.dismiss(),b.b.loading("Aguarde... Listando itens do pedido");var e=JSON.stringify({idPedido:localStorage.getItem("idPedido")}),t={method:"post",url:"https://projeto-pedidos-api.jelastic.saveincloud.net/itensPedido/lista",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("app-token")},data:e};m()(t).then((function(e){b.b.dismiss(),"001"===e.data.resposta.codigoMensagem?F(e.data.resposta.itensPedido):b.b.warning(e.data.resposta.mensagem,{autoClose:!1})})).catch((function(e){b.b.dismiss(),b.b.warning("Houve um erro n\xe3o esperado ao listar os itens do pedido, favor consulte o suporte",{autoClose:!1})}))},w=function(){b.b.dismiss(),b.b.loading("Aguarde... Listando pedidos");var e=JSON.stringify({textoPesquisa:""}),t={method:"post",url:"https://projeto-pedidos-api.jelastic.saveincloud.net/pedidos/lista",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("app-token")},data:e};m()(t).then((function(e){b.b.dismiss(),"001"===e.data.resposta.codigoMensagem?k(e.data.resposta.pedidos):b.b.warning(e.data.resposta.mensagem,{autoClose:!1})})).catch((function(e){b.b.dismiss(),b.b.warning("Houve um erro ao listar os pedidos, favor consulte o suporte",{autoClose:!1})}))};Object(s.useEffect)((function(){w()}),[]);return t?Object(u.jsxs)("div",{className:"Pedidos",children:[Object(u.jsx)(C,{handleLogOut:function(){localStorage.setItem("app-token",""),localStorage.setItem("app-email",""),localStorage.setItem("app-senha",""),e("/")}}),Object(u.jsxs)("div",{className:"Pedidos-novo",children:[l?Object(u.jsx)(N,{handleSubmitPedido:function(e){b.b.dismiss(),b.b.loading("Aguarde... Validando dados do pedido");var t=JSON.stringify({numeroPedidoCliente:e.numeroPedidoCliente,idCliente:e.idCliente}),a={method:"post",url:"https://projeto-pedidos-api.jelastic.saveincloud.net/pedidos",headers:{Authorization:"Bearer "+localStorage.getItem("app-token"),"Content-Type":"application/json"},data:t};m()(a).then((function(e){b.b.dismiss(),localStorage.setItem("idPedido",e.data.resposta.idPedido),A(),n(!0)})).catch((function(e){b.b.dismiss(),b.b.warning("Houve um erro ao iniciar o pedido",{autoClose:!1}),n(!1)}))},orderIsOpen:o}):Object(u.jsx)(P,{handleNewOrder:function(){j(!l)}}),o?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(f,{handleAddItem:function(e){b.b.dismiss(),b.b.loading("Aguarde... Validando dados do item");var t=e.precoUnitario;t=(t=t.replace(".",",")).replace(",",".");var a=JSON.stringify({idPedido:localStorage.getItem("idPedido"),idProduto:String(e.idProduto),quantidade:String(e.quantidade),precoUnitario:String(t)}),s={method:"post",url:"https://projeto-pedidos-api.jelastic.saveincloud.net/itensPedido",headers:{Authorization:"Bearer "+localStorage.getItem("app-token"),"Content-Type":"application/json"},data:a};m()(s).then((function(e){b.b.dismiss(),"001"===e.data.resposta.codigoMensagem?A():b.b.warning(e.data.resposta.mensagem,{autoClose:!1})})).catch((function(e){b.b.dismiss(),b.b.warning("Houve um erro ao adicionar o item, favor consulte o suporte",{autoClose:!1})}))}}),Object(u.jsx)(g,{itensPedido:x,handleItemDeletion:function(e){b.b.dismiss(),b.b.loading("Aguarde... Validando dados do item");var t=JSON.stringify({id:String(e)}),a={method:"delete",url:"https://projeto-pedidos-api.jelastic.saveincloud.net/itensPedido",headers:{Authorization:"Bearer "+localStorage.getItem("app-token"),"Content-Type":"application/json"},data:t};m()(a).then((function(e){b.b.dismiss(),"001"===e.data.resposta.codigoMensagem?A():b.b.warning(e.data.resposta.mensagem,{autoClose:!1})})).catch((function(e){b.b.dismiss(),b.b.warning("Erro n\xe3o esperado ao excluir o item do pedido, consulte o suporte",{autoClose:!1})}))}}),Object(u.jsx)(S,{handleFinishOrder:function(){localStorage.setItem("idPedido",""),j(!l),n(!1),w()}})]}):""]}),Object(u.jsx)(v,{listaPedidos:L}),Object(u.jsx)(b.a,{position:"top-center",draggable:"true"})]}):Object(u.jsx)(c.a,{to:"/"})},I=a.p+"static/media/404.3ccf2311.png",y=(a(218),function(){return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"Page404",children:[Object(u.jsx)("div",{className:"image-container",children:Object(u.jsx)("img",{src:I,alt:"P\xe1gina n\xe3o encontrada"})}),Object(u.jsx)("h2",{children:"A p\xe1gina solicitada n\xe3o existe ou voc\xea n\xe3o tem permiss\xe3o de acesso"}),Object(u.jsx)(d.b,{style:{color:"#FFF"},to:"/",children:"Voltar para o login"})]})})}),L=function(){return Object(u.jsx)("main",{className:"App",children:Object(u.jsx)(d.a,{children:Object(u.jsxs)(c.d,{children:[Object(u.jsx)(c.b,{path:"/",exact:!0,element:Object(u.jsx)(p,{})}),Object(u.jsx)(c.b,{path:"/pedidos",exact:!0,element:Object(u.jsx)(F,{})}),Object(u.jsx)(c.b,{path:"*",element:Object(u.jsx)(y,{})})]})})})};a(219);n.a.render(Object(u.jsx)(i.a.StrictMode,{children:Object(u.jsx)(L,{})}),document.getElementById("root"))},93:function(e,t,a){}},[[220,1,2]]]);
//# sourceMappingURL=main.39c1380e.chunk.js.map